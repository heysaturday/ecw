var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){var d=s.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),k.apply(a,d.concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){c.splice||(d=c,c=[]),!b(n,a)&&!b(o,a)&&(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../../src/libs/almond",function(){}),define("modules/helpers/DomElement",[],function(){return{hasClass:function(a,b){var c=a.className.split(" "),d=c.indexOf(b);return d>-1},addClass:function(a,b){var c=a.className.split(" "),d=c.indexOf(b);-1===d&&c.push(b),a.className=c.join(" ")},removeClass:function(a,b){var c=a.className.split(" "),d=c.indexOf(b);d>-1&&c.splice(d,1),a.className=c.join(" ")},toggleClass:function(a,b){var c=a.className.split(" "),d=c.indexOf(b);d>-1?c.splice(d,1):c.push(b),a.className=c.join(" ")},prepend:function(a,b){a.childNodes.length>0?a.insertBefore(b,a.childNodes[0]):a.appendChild(b)}}}),define("modules/helpers/fix/Polyfill",[],function(){return function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),{}}),define("modules/helpers/fix/StickyHover",[],function(){if("createTouch"in document)try{for(var a=/:hover/,b=0;b<document.styleSheets.length;b++)for(var c=document.styleSheets[b],d=c.cssRules.length-1;d>=0;d--){var e=c.cssRules[d];e.type===CSSRule.STYLE_RULE&&a.test(e.selectorText)&&c.deleteRule(d)}}catch(f){}return{}}),define("modules/helpers/fix/Fix",["modules/helpers/fix/Polyfill","modules/helpers/fix/StickyHover"],function(a,b){function c(c){this.polyfill=new a,this.stickyHover=new b}return c}),define("modules/helpers/SmoothScroll",[],function(){var a=function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},b=function(b,c,d,e){return d>e?c:b+(c-b)*a(d/e)},c=function(a,c,d){duration=c||500;var e=window.pageYOffset,f=a,g=Date.now(),h=function(){var a=Date.now()-g;window.scroll(0,b(e,f,a,duration)),a>duration?"function"==typeof callback&&callback(el):requestAnimationFrame(h)};h()};return function(a,b,d){c(a,b,d)}}),define("modules/ui/ChangeLocation",["modules/helpers/DomElement"],function(a){function b(){a.addClass(j,"loading"),f&&f.setAttribute("disabled","disabled"),h&&h.setAttribute("disabled","disabled"),g&&g.setAttribute("disabled","disabled"),i&&i.setAttribute("disabled","disabled")}function c(){a.removeClass(j,"loading"),f&&f.removeAttribute("disabled"),h&&h.removeAttribute("disabled"),g&&g.removeAttribute("disabled"),i&&i.removeAttribute("disabled")}function d(a,b){c(),window.location=j.getAttribute("data-url")+"?latitude="+a+"&longitude="+b}var e,f,g,h,i,j=document.getElementById("change-location");return j&&(e=j.querySelector("div"),f=e.querySelector("p > button"),h=e.querySelector("form"),g=h.querySelector("button"),i=h.querySelector("input"),f&&f.addEventListener("click",function(a){a.preventDefault(),navigator.geolocation?(b(),navigator.geolocation.getCurrentPosition(function(a){d(a.coords.latitude,a.coords.longitude)})):alert("Sorry, geolocation is not supported by this browser.")}),h&&h.addEventListener("submit",function(a){a.preventDefault();var e=i.value,f=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e);if(f){b();var g=new window.google.maps.Geocoder;g.geocode({address:e},function(a,b){b===window.google.maps.GeocoderStatus.OK?d(a[0].geometry.location.lat(),a[0].geometry.location.lng()):(alert("There was an error processing the zip code you provided."),c())})}else alert("Please enter a valid zip code.")})),{}}),define("modules/ui/Map",[],function(){var a=document.getElementById("map");if(a&&void 0!==window.google){var b=a.getAttribute("data-latitude"),c=a.getAttribute("data-longitude"),d=new google.maps.LatLng(b,c),e=new google.maps.Map(a,{center:d,disableDoubleClickZoom:!0,draggable:!1,keyboardShortcuts:!1,mapTypeControlOptions:{mapTypeIds:google.maps.MapTypeId.ROADMAP},scrollwheel:!1,panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,zoom:15}),f=new google.maps.MarkerImage(document.body.getAttribute("data-theme-url")+"/assets/img/flame.png",new google.maps.Size(50,60),new google.maps.Point(0,0),new google.maps.Point(25,60),new google.maps.Size(50,60)),g=new google.maps.Marker({position:new google.maps.LatLng(b,c),map:e,title:"East Coast Wings + Grill",icon:f});google.maps.event.addListener(g,"click",function(){window.open(a.getAttribute("data-link"),"_blank")}),window.addEventListener("orientationchange",function(){e.setCenter(d)}),window.addEventListener("resize",function(){e.setCenter(d)})}return{}}),define("modules/ui/MenuPage",["modules/helpers/DomElement","modules/helpers/SmoothScroll"],function(a,b){var c=document.getElementById("menu-content");if(c){var d=c.querySelectorAll(".menu-nav li"),e=c.querySelectorAll(".menu-content article"),f=c.querySelectorAll(".menu-content h3");a.addClass(d[0],"active"),a.addClass(e[0],"active");var g,h,i=function(c){c.preventDefault();var f,g,h=c.currentTarget.getAttribute("data-value");for(f=0,g=d.length;g>f;++f)d[f].getAttribute("id")==="menu-nav-"+h?a.addClass(d[f],"active"):a.removeClass(d[f],"active");for(f=0,g=e.length;g>f;++f)e[f].getAttribute("id")==="menu-group-"+h?a.addClass(e[f],"active"):a.removeClass(e[f],"active");var i=document.getElementById("menu-group-"+h);b(i.offsetTop-50)};for(g=0,h=d.length;h>g;++g)d[g].querySelector("span").addEventListener("click",i);for(g=0,h=f.length;h>g;++g)f[g].addEventListener("click",i)}return{}}),define("modules/ui/ToggleMenu",["modules/helpers/DomElement"],function(a){function b(b){b.preventDefault(),a.toggleClass(document.body,"show-menu")}for(var c=document.querySelectorAll("header button"),d=0,e=c.length;e>d;++d)c[d].addEventListener("click",b),c[d].addEventListener("touchstart",b);return document.querySelector("header .overlay").addEventListener("click",b),document.querySelector("header .overlay").addEventListener("touchstart",b),window.addEventListener("scroll",function(){document.body.scrollTop>=400&&a.removeClass(document.body,"show-menu")}),{}}),define("modules/Settings",[],function(){return{debug:!1,themeUrl:document.body.getAttribute("data-theme-url"),modelScale:400,totalTextures:2,wingModels:["drumette","wingette"]}}),define("modules/scene/AnimatedTexture",[],function(){var a=function(a,b,c,d,e){this.tilesHorizontal=b,this.tilesVertical=c,this.numberOfTiles=d,a.wrapS=a.wrapT=THREE.RepeatWrapping,a.repeat.set(1/this.tilesHorizontal,1/this.tilesVertical),this.tileDisplayDuration=e,this.currentDisplayTime=0,this.currentTile=0,this.texture=a};return a.prototype.update=function(a){for(this.currentDisplayTime+=a;this.currentDisplayTime>this.tileDisplayDuration;){this.currentDisplayTime-=this.tileDisplayDuration,this.currentTile++,this.currentTile===this.numberOfTiles&&(this.currentTile=0);var b=this.currentTile%this.tilesHorizontal;this.texture.offset.x=b/this.tilesHorizontal;var c=Math.floor(this.currentTile/this.tilesHorizontal);this.texture.offset.y=c/this.tilesVertical}},a}),define("modules/scene/DynamicTexture",["modules/Settings"],function(a){var b=function(b){b=b||{},this.options={},this.options.height=b.height||512,this.options.width=b.width||512,this.canvas=document.createElement("canvas"),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.context=this.canvas.getContext("2d"),this.texture=new THREE.Texture(this.canvas),a.debug&&(this.canvas.className="scratch-canvas",document.body.appendChild(this.canvas))};return b.prototype.destroy=function(){delete this.canvas,delete this.context,delete this.options,delete this.texture},b.prototype.drawImage=function(a,b,c){var d=c>>16&255,e=c>>8&255,f=255&c;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="rgba("+d+","+e+","+f+",1.0)",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(a,0,0),this.context.fillStyle="rgba("+d+","+e+","+f+","+(1-b)+")",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture.needsUpdate=!0},b}),define("modules/scene/Model",["modules/Settings","modules/scene/DynamicTexture"],function(a,b){var c=function(b,c){var d=new THREE.MeshPhongMaterial;d.map=c,d.normalMap=THREE.ImageUtils.loadTexture(b+"/map-norm.jpg"),d.specularMap=THREE.ImageUtils.loadTexture(b+"/map-spec.jpg"),d.specular=new THREE.Color("grey");var e=new THREE.Object3D,f=new THREE.JSONLoader;f.load(b+"/model.json",function(b,c){var f=new THREE.Mesh(b,d);f.scale.set(a.modelScale,a.modelScale,a.modelScale),e.add(f)}),this.material=d,this.object=e};return c.prototype.destroy=function(){delete this.material,delete this.object},c.prototype.updateAppearance=function(a){this.material.normalScale=new THREE.Vector2(a.normalScale,a.normalScale),this.material.shininess=a.shininess},c}),define("modules/scene/Scene",["modules/Settings","modules/scene/AnimatedTexture","modules/scene/DynamicTexture","modules/scene/Model"],function(a,b,c,d){var e=function(e,f,g){var h=this;this.clock=new THREE.Clock,this.canvas=e,this.mouse=new THREE.Vector2,this.parent=f||window,this.appearance=g||{model:"drumette",color:14912812,normalScale:.5,shininess:10,texture:1,textureAmount:.5,showFire:!1},this.orbitEnabled=!0,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,11e3),this.camera.position.z=3e3,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.scene.add(this.camera),System.support.webgl===!0?this.renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0,canvas:this.canvas,preserveDrawingBuffer:!0}):this.renderer=new THREE.CanvasRenderer({alpha:!0,antialias:!0,canvas:this.canvas,preserveDrawingBuffer:!0}),this.renderer.setSize(this.parent.innerWidth,this.parent.innerHeight),this.stats=new Stats,a.debug&&(this.stats.domElement.style.position="absolute",this.stats.domElement.style.top=0,document.body.appendChild(this.stats.domElement));var i=new THREE.DirectionalLight(16777215,1);i.position.set(2,1.2,5).normalize(),this.scene.add(i);var j=new THREE.DirectionalLight(16777215,1);j.position.set(-2,-1.2,-10).normalize(),this.scene.add(j);var k=new THREE.AmbientLight(4210752);this.scene.add(k),this.texture=new c,this.textures=[];for(var l=function(){h.texture.drawImage(h.textures[0],h.appearance.textureAmount,h.appearance.color)},m=0,n=a.totalTextures;n>m;++m){var o=new Image;0===m&&(o.onload=l),o.src=a.themeUrl+"/assets/img/wing-builder/textures/"+(m+1)+".png",this.textures.push(o)}this.models=[];var p=new d(a.themeUrl+"/assets/models/drumette",this.texture.texture);this.models.push(p),this.scene.add(p.object);var q=new d(a.themeUrl+"/assets/models/wingette",this.texture.texture);this.models.push(q),this.scene.add(q.object);var r=new THREE.ImageUtils.loadTexture(a.themeUrl+"/assets/img/wing-builder/flame.png"),s=new THREE.MeshBasicMaterial({map:r,side:THREE.DoubleSide}),t=new THREE.PlaneGeometry(50,50,1,1);this.fire=new THREE.Mesh(t,s),this.fire.position.set(-200,1e3,-100),this.fire.scale.set(40,40,40),this.scene.add(this.fire),this.animatedTexture=new b(r,8,4,32,35),this.fire.visible=h.appearance.showFire,this.handlerUpdate=this.update.bind(this),this.handlerOnResize=this.onResize.bind(this),this.handlerMouseMove=this.mouseMove.bind(this),document.addEventListener("mousemove",this.handlerMouseMove,!1),window.addEventListener("resize",this.handlerOnResize,!1),this.onResize(),setTimeout(this.handlerOnResize,100),this.updateAppearance(this.appearance),this.update()};return e.prototype.destroy=function(){cancelAnimationFrame(this.requestAnimationFrameId),document.removeEventListener("mousemove",this.handlerMouseMove,!1),window.removeEventListener("resize",this.handlerOnResize,!1),delete this.camera,delete this.canvas,delete this.handlerUpdate,delete this.handlerMouseMove,delete this.handlerOnResize,delete this.models,delete this.mouse,delete this.parent,delete this.renderer,delete this.scene,delete this.stats,delete this.texture,delete this.textures},e.prototype.update=function(){if(this.requestAnimationFrameId=requestAnimationFrame(this.handlerUpdate,this.renderer.domElement),this.stats.begin(),this.orbitEnabled){var a=this.clock.getDelta();this.animatedTexture.update(1e3*a)}var b=100*this.mouse.x*12,c=100*this.mouse.y*12;this.camera.position.x+=.15*(b-this.camera.position.x),this.camera.position.y+=.15*(c-this.camera.position.y),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.renderer.render(this.scene,this.camera),this.stats.end()},e.prototype.mouseMove=function(a){a.preventDefault(),this.orbitEnabled&&(this.mouse.x=a.clientX/window.innerWidth*2-1,this.mouse.y=2*-(a.clientY/window.innerHeight)+1)},e.prototype.onResize=function(){void 0!==this.parent.offsetWidth?(this.camera.aspect=this.parent.offsetWidth/this.parent.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parent.offsetWidth,this.parent.offsetHeight)):(this.camera.aspect=this.parent.innerWidth/this.parent.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parent.innerWidth,this.parent.innerHeight))},e.prototype.updateAppearance=function(b){"string"==typeof b.color&&(b.color=b.color.replace("#",""),b.color="0x"+b.color,b.color=parseInt(b.color));for(var c=0,d=this.models.length;d>c;++c)this.models[c].object.visible=!1,this.models[c].updateAppearance(b);b.model===a.wingModels[0]?this.models[0].object.visible=!0:this.models[1].object.visible=!0,this.fire.visible=b.showFire,this.texture.drawImage(this.textures[b.texture-1],b.textureAmount,b.color),this.renderer.render(this.scene,this.camera)},e}),define("modules/scene/Screenshot",[],function(){function a(a){this.sceneCanvas=a.sceneCanvas,this.backgrounds=[];for(var b=0,c=function(){b++,b>=a.backgrounds.length&&a.allLoadedCallback&&a.allLoadedCallback()},d=0,e=a.backgrounds.length;e>d;++d){var f=new Image;f.onload=c,f.src=a.backgrounds[d],this.backgrounds.push(f)}this.canvas=a.screenshotCanvas?a.screenshotCanvas:document.createElement("canvas"),this.canvas.width=640,this.canvas.height=480,this.canvasContext=this.canvas.getContext("2d")}return a.prototype.render=function(a,b){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasContext.fillStyle=a,this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height),b>-1&&this.canvasContext.drawImage(this.backgrounds[b],0,0);var c=this.canvas.width,d=this.canvas.height,e=this.sceneCanvas.width,f=this.sceneCanvas.height,g=d/f*1;this.canvasContext.drawImage(this.sceneCanvas,0,0,e,f,.5*(c-e*g),.5*(d-f*g),e*g,f*g)},a.prototype.saveImage=function(a,b){this.render(a,b);var c=document.createElement("a");c.download="image.png",c.href=this.canvas.toDataURL("image/png"),c.style.display="none",document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)},a}),define("modules/ui/Slider",[],function(){function a(a,b){this.init(a,b)}function b(){void 0===window.requestAnimFrame&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}())}function c(){var a=["webkit","Moz","O","ms"],b=this;b.styleTransform="transform",a.every(function(a){var c=a+"Transform";return"undefined"!=typeof document.body.style[c]?(b.styleTransform=c,!1):!0}),b.styleTransformOrigin="transformOrigin",a.every(function(a){var c=a+"TransformOrigin";return"undefined"!=typeof document.body.style[c]?(b.styleTransformOrigin=c,!1):!0}),b.stylePerspective=null,"undefined"!=typeof document.body.style.perspective&&(b.stylePerspective="perspective"),a.every(function(a){var c=a+"Perspective";return"undefined"!=typeof document.body.style[c]?(b.stylePerspective=c,!1):!0});var c=navigator.userAgent.toLowerCase();this.isAndroid=c.indexOf("android")>-1?!0:!1}function d(a,b){if(0>=b)return"none";if(this.settings.infiniteScrolling===!1){var c=Math.round(this.offset/this.settings.itemWidth)+this.settings.numberOfDeselectedItems+1,d=Math.round(this.offset/this.settings.itemWidth)-this.settings.numberOfDeselectedItems-1;if(a>c||d>a)return"none"}return"block"}function e(a){return a>=this.items.length?a%this.items.length:0>a?e.call(this,this.items.length+a%this.items.length):a}function f(a){var b,c,f,g,h,i,j;this.offset="number"==typeof a?a:this.offset;var k=Math.floor((this.offset+this.settings.itemWidth/2)/this.settings.itemWidth),l=this.element.clientWidth/2+this.centerOffset,m=this.offset-k*this.settings.itemWidth,n=0>m?1:-1,o=this.items.length>>1,p=-n*m*2/this.settings.itemWidth,q=this.settings.offsetOfSelectedItem*(1-p),r=e.call(this,Math.floor((this.offset+this.settings.itemWidth/2)/this.settings.itemWidth));this.selectedItem!==r&&(void 0!==this.selectedSound&&this.selectedSound.play(),this.settings.callback(e.call(this,k))),this.selectedItem=r,f=e.call(this,k),i=-m/2,h=this.settings.opacityOfDeselectedItem+(this.settings.opacityOfSelectedItem-this.settings.opacityOfDeselectedItem)*(1-p),j=this.settings.scaleOfDeselectedItem+(this.settings.scaleOfSelectedItem-this.settings.scaleOfDeselectedItem)*(1-p),g=d.call(this,f,h),b=this.items[f],b.className=this.settings.itemClass+" active",b.style.display=g,b.style.opacity=h,b.style.left=l+i+"px",b.style[this.styleTransform]="translateX(-50%) scale("+j+")",b.style.visibility="none"===g?"hidden":"visible";var s,t,u;0!==this.settings.constantSpacing&&(u=b.offsetWidth*j/2,s=i-u-this.settings.constantSpacing,t=i+u+this.settings.constantSpacing);var v=-q-this.settings.itemWidth/2,w=-q+2*-this.settings.itemWidth/2,x=q+this.settings.itemWidth/2,y=q+this.settings.itemWidth*(this.settings.numberOfDeselectedItems+1)/2;for(c=1;o>=c;++c)f=e.call(this,k-c),i=-q+(-this.settings.itemWidth*c-m)/2,h=(i-w)/(v-w)*this.settings.opacityOfDeselectedItem,j=this.settings.scaleOfHiddenItem+(this.settings.scaleOfDeselectedItem-this.settings.scaleOfHiddenItem)*((i-w)/(v-w)),g=d.call(this,f,h),b=this.items[f],0!==this.settings.constantSpacing&&(u=b.offsetWidth*j/2,s-=u,i=s,s-=u+this.settings.constantSpacing),"none"===g&&(i=0),b.className=this.settings.itemClass,b.style.display=g,b.style.opacity=h,b.style.left=l+i+"px",b.style[this.styleTransform]="translateX(-50%) scale("+j+")",b.style.visibility="none"===g?"hidden":"visible",f=e.call(this,k+c),i=q+(this.settings.itemWidth*c-m)/2,h=(i-y)/(x-y)*this.settings.opacityOfDeselectedItem,j=this.settings.scaleOfHiddenItem+(this.settings.scaleOfDeselectedItem-this.settings.scaleOfHiddenItem)*((i-y)/(x-y)),g=d.call(this,f,h),b=this.items[f],0!==this.settings.constantSpacing&&(u=b.offsetWidth*j/2,t+=u,i=t,t+=u+this.settings.constantSpacing),"none"===g&&(i=0),b.className=this.settings.itemClass,b.style.display=g,b.style.opacity=h,b.style.left=l+i+"px",b.style[this.styleTransform]="translateX(-50%) scale("+j+")",b.style.visibility="none"===g?"hidden":"visible";this.settings.infiniteScrolling===!1&&(null!==this.settings.nextButton&&(this.settings.nextButton.style.cursor=Math.round(this.offset/this.settings.itemWidth)>=this.items.length-1?"default":"pointer",this.settings.nextButton.style.opacity=Math.round(this.offset/this.settings.itemWidth)>=this.items.length-1?.25:1),null!==this.settings.prevButton&&(this.settings.prevButton.style.cursor=Math.round(this.offset/this.settings.itemWidth)<=0?"default":"pointer",this.settings.prevButton.style.opacity=Math.round(this.offset/this.settings.itemWidth)<=0?.25:1))}return a.prototype.init=function(a,d){d="object"!=typeof d?{}:d,d.callback=void 0===d.callback||"function"!=typeof d.callback?function(a){}:d.callback,d.callbackSettled=void 0===d.callbackSettled||"function"!=typeof d.callbackSettled?function(a){}:d.callbackSettled,d.constantSpacing=void 0===d.constantSpacing||"number"!=typeof d.constantSpacing?0:d.constantSpacing,d.infiniteScrolling=void 0===d.infiniteScrolling||"boolean"!=typeof d.infiniteScrolling?!1:d.infiniteScrolling,d.itemClass=void 0===d.itemClass||"string"!=typeof d.itemClass?"li":d.itemClass,d.itemWidth=void 0===d.itemWidth||"number"!=typeof d.itemWidth?100:d.itemWidth,d.itemIsCentered=void 0===d.itemIsCentered||"boolean"!=typeof d.itemIsCentered?!1:d.itemIsCentered,d.itemSelector=void 0===d.itemSelector||"string"!=typeof d.itemSelector?"li":d.itemSelector,d.keyboardIsEnabled=void 0===d.keyboardIsEnabled||"boolean"!=typeof d.keyboardIsEnabled?!1:d.keyboardIsEnabled,d.keyboardNextKeys=void 0===d.keyboardNextKeys||"object"!=typeof d.keyboardNextKeys||d.keyboardNextKeys.isArray===!1?[32,34,39,40]:d.keyboardNextKeys,d.keyboardPrevKeys=void 0===d.keyboardPrevKeys||"object"!=typeof d.keyboardPrevKeys||d.keyboardPrevKeys.isArray===!1?[33,37,38]:d.keyboardPrevKeys,d.mouseWheelIsEnabled=void 0===d.mouseWheelIsEnabled||"boolean"!=typeof d.mouseWheelIsEnabled?!1:d.mouseWheelIsEnabled,d.nextButton=void 0===d.nextButton||"object"!=typeof d.nextButton?null:d.nextButton,d.numberOfDeselectedItems=void 0===d.numberOfDeselectedItems||"number"!=typeof d.numberOfDeselectedItems?2:d.numberOfDeselectedItems,d.offsetOfSelectedItem=void 0===d.offsetOfSelectedItem||"number"!=typeof d.offsetOfSelectedItem?30:d.offsetOfSelectedItem,d.opacityOfDeselectedItem=void 0===d.opacityOfDeselectedItem||"number"!=typeof d.opacityOfDeselectedItem?.3:d.opacityOfDeselectedItem,d.opacityOfSelectedItem=void 0===d.opacityOfSelectedItem||"number"!=typeof d.opacityOfSelectedItem?1:d.opacityOfSelectedItem,d.prevButton=void 0===d.prevButton||"object"!=typeof d.prevButton?null:d.prevButton,d.scaleOfHiddenItem=void 0===d.scaleOfHiddenItem||"number"!=typeof d.scaleOfHiddenItem?.5:d.scaleOfHiddenItem,d.scaleOfDeselectedItem=void 0===d.scaleOfDeselectedItem||"number"!=typeof d.scaleOfDeselectedItem?.5:d.scaleOfDeselectedItem,d.scaleOfSelectedItem=void 0===d.scaleOfSelectedItem||"number"!=typeof d.scaleOfSelectedItem?1:d.scaleOfSelectedItem,d.selectedIndex=void 0===d.selectedIndex||"number"!=typeof d.selectedIndex?0:d.selectedIndex,d.selectedItem=void 0===d.selectedItem||"object"!=typeof d.selectedItem?null:d.selectedItem,d.selectedSound=void 0===d.selectedSound||"string"!=typeof d.selectedSound?null:d.selectedSound,d.selectedSoundVolume=void 0===d.selectedSoundVolume||"number"!=typeof d.selectedSoundVolume?1:d.selectedSoundVolume;var e,f,g;if(this.element=a,this.hammer=new Hammer(this.element,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_HORIZONTAL,threshold:25,prevent_default:!0}],[Hammer.Press,{enable:!1}],[Hammer.Pinch,{enable:!1}],[Hammer.Rotate,{enable:!1}],[Hammer.Swipe,{enable:!1}],[Hammer.Tap,{enable:!0}]]}),this.items=this.element.querySelectorAll(d.itemSelector),this.settings=d,null!==this.settings.selectedItem)for(f=0,g=this.items.length;g>f;++f)if(e=this.items[f],e===this.settings.selectedItem){this.settings.selectedItem=f;break}for(this.isTrackPad=!1,this.selectedItem=this.settings.selectedIndex,this.enabled=!1,this.mouseWheelIsActive=!1,this.pressed=!1,this.timeConstant=250,this.offset=this.target=0,this.centerOffset=0,null!==this.settings.selectedSound&&(this.selectedSound=new Audio(this.settings.selectedSound),this.selectedSound.volume=this.settings.selectedSoundVolume),b.call(this),c.call(this),f=0,g=this.items.length;g>f;++f)e=this.items[f],e.style.left="0",e.style.position="absolute",this.settings.itemIsCentered?e.style[this.styleTransformOrigin]="center center":e.style[this.styleTransformOrigin]="center top";this.touchDownEventHandler=this.touchDownEvent.bind(this),this.touchEventHandler=this.touchEvent.bind(this),this.keyboardEventHandler=this.keyboardEvent.bind(this),this.mouseWheelEventHander=this.mouseWheelEvent.bind(this),this.nextButtonDownEventHandler=this.nextButtonDownEvent.bind(this),this.nextButtonUpEventHandler=this.nextButtonUpEvent.bind(this),this.prevButtonDownEventHandler=this.prevButtonDownEvent.bind(this),this.prevButtonUpEventHandler=this.prevButtonUpEvent.bind(this)},a.prototype.destroy=function(){this.disable(),this.element.removeAttribute("style");var a,b;for(a=0,b=this.items.length;b>a;++a)this.items[a].className=this.settings.itemClass,this.items[a].removeAttribute("style")},a.prototype.enable=function(){this.enabled=!0;for(var a=this.element.querySelectorAll("img"),b=0,c=a.length;c>b;++b)a[b].addEventListener("mousedown",this.touchDownEventHandler),a[b].addEventListener("touchdown",this.touchDownEventHandler);this.hammer.on("panstart pan panend tap",this.touchEventHandler),this.settings.keyboardIsEnabled&&document.addEventListener("keydown",this.keyboardEventHandler),this.settings.mouseWheelIsEnabled&&(this.element.addEventListener("mousewheel",this.mouseWheelEventHander),this.element.addEventListener("DOMMouseScroll",this.mouseWheelEventHander)),null!==this.settings.nextButton&&(this.settings.nextButton.addEventListener("mousedown",this.nextButtonDownEventHandler),this.settings.nextButton.addEventListener("mouseout",this.nextButtonUpEventHandler),this.settings.nextButton.addEventListener("mouseup",this.nextButtonUpEventHandler)),null!==this.settings.prevButton&&(this.settings.prevButton.addEventListener("mousedown",this.prevButtonDownEventHandler),this.settings.prevButton.addEventListener("mouseout",this.prevButtonUpEventHandler),this.settings.prevButton.addEventListener("mouseup",this.prevButtonUpEventHandler)),f.call(this,this.selectedItem*this.settings.itemWidth)},a.prototype.disable=function(){this.enabled=!1;for(var a=this.element.querySelectorAll("img"),b=0,c=a.length;c>b;++b)a[b].removeEventListener("mousedown",this.touchDownEventHandler),a[b].removeEventListener("touchdown",this.touchDownEventHandler);this.hammer.off("panstart pan panend tap",this.touchEventHandler),this.settings.keyboardIsEnabled&&document.removeEventListener("keydown",this.keyboardEventHandler),this.settings.mouseWheelIsEnabled&&(this.element.removeEventListener("mousewheel",this.mouseWheelEventHander),this.element.removeEventListener("DOMMouseScroll",this.mouseWheelEventHander)),null!==this.settings.nextButton&&(this.settings.nextButton.removeEventListener("mousedown",this.nextButtonDownEventHandler),this.settings.nextButton.removeEventListener("mouseout",this.nextButtonUpEventHandler),this.settings.nextButton.removeEventListener("mouseup",this.nextButtonUpEventHandler)),null!==this.settings.prevButton&&(this.settings.prevButton.removeEventListener("mousedown",this.prevButtonDownEventHandler),this.settings.prevButton.removeEventListener("mouseout",this.prevButtonUpEventHandler),this.settings.prevButton.removeEventListener("mouseup",this.prevButtonUpEventHandler))},a.prototype.getIndex=function(){return this.selectedItem},a.prototype.getItem=function(){return this.items[this.selectedItem]},a.prototype.setCenterOffset=function(a){this.centerOffset=a},a.prototype.setIndex=function(a){this.pressed=!1;var b=this.offset-(this.selectedItem-a)*this.settings.itemWidth;if(this.settings.infiniteScrolling){var c=this.offset-b;c>this.items.length*this.settings.itemWidth*.5?b+=this.items.length*this.settings.itemWidth:c<this.items.length*this.settings.itemWidth*-.5&&(b-=this.items.length*this.settings.itemWidth)}else 0>b?b=0:b>this.settings.itemWidth*(this.items.length-1)&&(b=this.settings.itemWidth*(this.items.length-1));return b=Math.round(b/this.settings.itemWidth)*this.settings.itemWidth,this.target=b,this.offset!==this.target?(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimFrame(this.autoScroll.bind(this)),!0):void 0},a.prototype.setItem=function(a){var b,c;for(b=0,c=this.items.length;c>b;++b)if(this.items[b]===a)return void this.setIndex(b)},a.prototype.nextItem=function(){this.settings.infiniteScrolling===!1&&this.selectedItem>=this.items.length-1||this.setIndex(this.selectedItem+1)},a.prototype.prevItem=function(){this.settings.infiniteScrolling===!1&&this.selectedItem<=0||this.setIndex(this.selectedItem-1)},a.prototype.setItemWidth=function(a){this.settings.itemWidth=void 0===a||"number"!=typeof a?this.settings.itemWidth:a},a.prototype.setOffsetOfSelectedItem=function(a){this.settings.offsetOfSelectedItem=void 0===a||"number"!=typeof a?this.settings.offsetOfSelectedItem:a},a.prototype.setNumberOfDeselectedItems=function(a){this.settings.numberOfDeselectedItems=void 0===a||"number"!=typeof a?this.settings.numberOfDeselectedItems:a},a.prototype.redraw=function(){var a=this;setTimeout(function(){f.call(a,a.selectedItem*a.settings.itemWidth)},10)},a.prototype.track=function(){var a,b,c,d;a=Date.now(),b=a-this.timestamp,this.timestamp=a,c=this.offset-this.frame,this.frame=this.offset,d=1e3*c/(1+b),this.velocity=.8*d+.2*this.velocity},a.prototype.autoScroll=function(){var a,b;this.amplitude&&(a=Date.now()-this.timestamp,b=this.amplitude*Math.exp(-a/this.timeConstant),Math.abs(b)>1?(f.call(this,this.target-b),requestAnimFrame(this.autoScroll.bind(this))):(f.call(this,this.target),null!==this.stylePerspective&&(this.element.style[this.stylePerspective]="1000"),this.settings.callbackSettled(this.getIndex())))},a.prototype.touchDownEvent=function(a){a.preventDefault()},a.prototype.touchEvent=function(a){switch(a.type){case"panstart":null!==this.stylePerspective&&this.isAndroid&&(this.element.style[this.stylePerspective]="none"),clearTimeout(this.mouseWheelTicker),this.pressed=!0,this.reference=a.pointers[0].clientX,this.velocity=this.amplitude=0,this.frame=this.offset,
this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this.track.bind(this),100);break;case"pan":var b,c;this.pressed&&(clearTimeout(this.mouseWheelTicker),b=a.pointers[0].clientX,c=this.reference-b,(c>2||-2>c)&&(this.reference=b,f.call(this,this.offset+c)));break;case"panend":this.pressed=!1,clearInterval(this.ticker),clearTimeout(this.mouseWheelTicker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.settings.itemWidth)*this.settings.itemWidth,this.settings.infiniteScrolling===!1&&(this.target<0?this.target=0:this.target>this.settings.itemWidth*(this.items.length-1)&&(this.target=this.settings.itemWidth*(this.items.length-1))),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimFrame(this.autoScroll.bind(this)),null!==this.stylePerspective&&(this.element.style[this.stylePerspective]="1000");break;case"tap":var d,e;for(d=0,e=this.items.length;e>d;++d)if(this.items[d]===a.target||this.items[d]===a.target.parentNode)return d===this.selectedItem&&this.settings.callback(this.getIndex()),void this.setIndex(d)}},a.prototype.keyboardEvent=function(a){this.settings.keyboardNextKeys.indexOf(a.which)>-1&&this.nextItem(),this.settings.keyboardPrevKeys.indexOf(a.which)>-1&&this.prevItem()},a.prototype.mouseWheelTracker=function(){this.mouseWheelIsActive=!1,clearTimeout(this.mouseWheelTicker),this.setIndex(this.selectedItem)},a.prototype.mouseWheelEvent=function(a){a.preventDefault(),void 0!==a.wheelDeltaX&&0!==Math.abs(a.wheelDeltaX)&&(this.isTrackPad=!0);var b;if(this.isTrackPad){if(b=a.wheelDelta||-a.detail,this.mouseWheelIsActive===!1){if(Math.abs(b)<5)return;this.pressed=!1,clearInterval(this.ticker),this.mouseWheelIsActive=!0,this.velocity=this.amplitude=0,this.frame=this.offset}var c=this.offset+b;if(this.settings.infiniteScrolling===!1){if(0>c)return f.call(this,c),this.mouseWheelIsActive=!1,clearTimeout(this.mouseWheelTicker),this.setIndex(this.selectedItem),void 0;if(c>this.settings.itemWidth*(this.items.length-1))return f.call(this,c),this.mouseWheelIsActive=!1,clearTimeout(this.mouseWheelTicker),this.setIndex(this.selectedItem),void 0}f.call(this,c),clearTimeout(this.mouseWheelTicker),this.mouseWheelTicker=setTimeout(this.mouseWheelTracker.bind(this),150)}else b=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),0>b?this.prevItem():this.nextItem()},a.prototype.nextButtonDownEvent=function(a){this.nextItem(),clearInterval(this.nextButtonTicker),this.nextButtonTicker=setInterval(this.nextItem.bind(this),500),a.preventDefault()},a.prototype.nextButtonUpEvent=function(a){clearInterval(this.nextButtonTicker),a.preventDefault()},a.prototype.prevButtonDownEvent=function(a){this.prevItem(),clearInterval(this.prevButtonTicker),this.prevButtonTicker=setInterval(this.prevItem.bind(this),500),a.preventDefault()},a.prototype.prevButtonUpEvent=function(a){clearInterval(this.prevButtonTicker),a.preventDefault()},a}),define("modules/ui/WingBuilderIntro",["modules/Settings","modules/helpers/DomElement"],function(a,b){var c=function(){this.anim=0,this.startTime=0,this.frame=0,this.playing=!1,this.duration=2500,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvas.width=345,this.bufferCanvas.height=240,this.bufferCanvasContext=this.bufferCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.className="wing-builder-placeholder",this.canvas.width=345,this.canvas.height=240,this.canvasContext=this.canvas.getContext("2d"),this.frames=36,this.frameWidth=345,this.frameHeight=240,this.frameScale=this.bufferCanvas.width/this.frameWidth,this.canvas.style.display="none",document.getElementById("wing-builder").insertBefore(this.canvas,document.getElementById("wing-builder").childNodes[0]);var b=this,c=function(){b.canvas.style.display="block",b.play()};this.image=new Image,this.image.onload=c,this.image.src=a.themeUrl+"/assets/img/wing-builder/intro/1.png"};return c.prototype.play=function(){this.startTime=Date.now(),this.playing=!0,this.anim=requestAnimationFrame(this.update.bind(this))},c.prototype.reset=function(){this.stop(),this.drawFrame(0),this.play()},c.prototype.drawFrame=function(a){this.bufferCanvasContext.clearRect(0,0,this.frameWidth,this.frameHeight);var b=Math.floor(this.image.width/this.frameWidth),c=Math.floor(a/b),d=Math.floor(a%b);this.bufferCanvasContext.save(),this.bufferCanvasContext.scale(this.frameScale,this.frameScale),this.bufferCanvasContext.drawImage(this.image,d*this.frameWidth,c*this.frameHeight,this.frameWidth,this.frameHeight,0,0,this.frameWidth,this.frameHeight),this.bufferCanvasContext.restore(),this.canvasContext.clearRect(0,0,this.frameWidth,this.frameHeight),this.canvasContext.drawImage(this.bufferCanvas,0,0)},c.prototype.setFrame=function(a){this.stop(),this.frame=a,this.drawFrame(this.frame)},c.prototype.restart=function(){this.startTime=Date.now()},c.prototype.stop=function(){this.playing=!1,cancelAnimationFrame(this.anim)},c.prototype.update=function(){if(this.playing){var a=Date.now()-this.startTime;a%=this.duration,this.frame=Math.floor(a/this.duration*this.frames),this.drawFrame(this.frame),this.anim=requestAnimationFrame(this.update.bind(this))}},c}),define("modules/ui/WingBuilder",["modules/Settings","modules/helpers/fix/Fix","modules/helpers/DomElement","modules/scene/Scene","modules/scene/Screenshot","modules/ui/Slider","modules/ui/WingBuilderIntro"],function(a,b,c,d,e,f,g){return{}}),require(["modules/helpers/DomElement","modules/helpers/fix/Fix","modules/helpers/SmoothScroll","modules/ui/ChangeLocation","modules/ui/Map","modules/ui/MenuPage","modules/ui/ToggleMenu","modules/ui/WingBuilder"],function(a,b,c,d,e,f,g,h){if(window.isBadBrowser!==!0){var i=document.documentElement.className,j=new RegExp("(^|\\s)no-js(\\s|$)");document.documentElement.className=i.replace(j,"$1js$2"),document.documentElement.setAttribute("data-useragent",navigator.userAgent);var k=document.querySelector(".home-hero > .icon");k&&k.addEventListener("click",function(a){a.preventDefault();var b=document.querySelector(".home-main-sections");c(b.offsetTop)});var l=document.querySelector("#header-alert button");l&&l.addEventListener("click",function(b){b.preventDefault(),a.addClass(document.body,"hide-alert"),window.location=document.body.getAttribute("data-url")+"?hide_alert=true"});var m=document.querySelectorAll(".flavor-container .flavor h5");if(m)for(var n=function(b){b.preventDefault();var c=b.currentTarget.getAttribute("data-id"),d=document.getElementById(c);a.toggleClass(d,"active")},o=0,p=m.length;p>o;++o)m[o].addEventListener("click",n);var q=document.querySelector(".heat-indexes-link");q&&q.addEventListener("click",function(a){a.preventDefault(),c(document.getElementById("heat-indexes").offsetTop-20)})}}),define("main",function(){});